<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
    <title>FCC Camper Leaderboard</title>
    <!-- <link href="favicon.ico" rel="icon" type="image/x-icon"> -->
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
    <!-- <link rel="stylesheet" href="style/main.css" /> -->
    <script src="https://npmcdn.com/react@15.3.0/dist/react.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.0/dist/react-dom.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
</head>

<body>
  <div id="app"><div>
    <script type="text/babel">
    const recentUrl = "https://fcctop100.herokuapp.com/api/fccusers/top/recent";
    const alltimeUrl = "https://fcctop100.herokuapp.com/api/fccusers/top/alltime";

    function getJson(url, callback) {

        const request = new XMLHttpRequest();

        request.onreadystatechange = () => {
          if (request.readyState === 4 && request.status === 200) {
            callback(request.response);
          }
        }
        request.open("GET", url);
        request.responseType = "json";
        request.send();
    }

    function parseJson(data) {

      for (let i = 0; i < data.length; i++) {
        const username = data[i].username,
            img = data[i].img,
            alltime = data[i].alltime,
            recent = data[i].recent;

        // temp. just to show data
        document.getElementById('app').innerHTML += "<img src='" + img + "' width='50' height='50'> " + username + " " + recent + " " + alltime + "<br>";
      }

      // temp. just to show data
      document.getElementById('app').innerHTML += "<br><br>===<br>"
    }

    // getJson(recentUrl, parseJson);
    // getJson(alltimeUrl, parseJson);

    class Layout extends React.Component {
      render() {
        return (
          <div className="layout">
          <Title />
          <TableHeader />
          </div>
        );
      }
    }

    class Title extends React.Component {
      render() {
        return (
          <div className="title">
          Leaderboard
          </div>
        );
      }
    }

    class TableHeader extends React.Component {
      render() {
        return (
          <div className="tableHeader">
          <div className="cell">#</div>
          <div className="cell">Camper Name</div>
          <div className="cell">Points in last 30 days</div>
          <div className="cell">All time points</div>
          </div>
        );
      }
    }

    ReactDOM.render(
      <Layout />, document.getElementById('app')
    );

    </script>
</body>

</html>
